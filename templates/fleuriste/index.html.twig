{% extends 'base.html.twig' %}

{% block title %}Nos Fleuristes - FleurVerte{% endblock %}

{% block body %}
	{# Page Fleuristes - Design lÃ©ger et transparent #}
	<div class="min-h-screen bg-white relative overflow-hidden">
		{# Formes dÃ©coratives flottantes #}
		<div class="absolute inset-0 overflow-hidden pointer-events-none">
			<div class="absolute top-20 left-10 w-72 h-72 bg-green-100/40 rounded-full blur-3xl animate-float"></div>
			<div class="absolute top-60 right-10 w-96 h-96 bg-emerald-100/30 rounded-full blur-3xl animate-float-slow"></div>
			<div class="absolute bottom-40 left-1/4 w-64 h-64 bg-teal-100/30 rounded-full blur-3xl animate-float-delay"></div>
			{# Formes florales dÃ©coratives #}
			<div class="absolute top-32 right-1/4 text-green-200/30 text-9xl animate-pulse-soft">ğŸŒ¿</div>
			<div class="absolute bottom-20 left-16 text-emerald-200/20 text-8xl animate-float">ğŸŒ¸</div>
			<div class="absolute top-1/2 right-10 text-green-100/25 text-7xl animate-float-slow">ğŸŒº</div>
		</div>

		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-16 py-16 relative z-10">
			{# Header #}
			<div class="text-center mb-12">
				<div class="inline-flex items-center gap-2 px-5 py-2 bg-green-50/80 backdrop-blur-sm rounded-full border border-green-100 mb-6">
					<i class="fas fa-store text-green-600"></i>
					<span class="text-green-700 font-medium text-sm">Artisans passionnÃ©s</span>
				</div>
				<h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">Nos Fleuristes</h1>
				<p class="text-lg text-gray-500 max-w-2xl mx-auto">DÃ©couvrez nos artisans fleuristes partenaires, experts passionnÃ©s qui cultivent avec amour les plus belles fleurs.</p>
			</div>

			{# Barre de recherche #}
			<div class="max-w-xl mx-auto mb-12">
				<form action="{{ path('app_fleuriste_index') }}" method="get" class="relative">
					<div class="flex items-center bg-white/80 backdrop-blur-sm rounded-2xl border border-gray-200 shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
						<div class="pl-5 text-gray-400">
							<i class="fas fa-search"></i>
						</div>
						<input type="text" name="q" placeholder="Rechercher un fleuriste..." 
							class="flex-1 px-4 py-4 bg-transparent focus:outline-none text-gray-700" 
							value="{{ app.request.query.get('q') }}">
						<button type="submit" class="bg-green-500 hover:bg-green-600 text-white px-6 py-4 font-semibold transition-colors">
							Rechercher
						</button>
					</div>
				</form>
			</div>

			{% if fleuristes is empty and app.request.query.get('q') %}
				{# Message aucun rÃ©sultat #}
				<div class="max-w-lg mx-auto text-center bg-white/70 backdrop-blur-sm rounded-3xl p-10 border border-white/50 shadow-lg">
					<div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
						<i class="fas fa-search text-gray-400 text-3xl"></i>
					</div>
					<h3 class="text-xl font-bold text-gray-900 mb-2">Aucun fleuriste trouvÃ©</h3>
					<p class="text-gray-500 mb-6">Aucun rÃ©sultat pour "{{ app.request.query.get('q') }}"</p>
					<a href="{{ path('app_fleuriste_index') }}" class="inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-semibold">
						<i class="fas fa-arrow-left"></i>
						Voir tous les fleuristes
					</a>
				</div>
			{% else %}
				{# Stats #}
				<div class="flex justify-center gap-6 mb-10">
					<div class="flex items-center gap-2 px-4 py-2 bg-white/60 backdrop-blur-sm rounded-xl border border-white/50 shadow">
						<i class="fas fa-users text-green-600"></i>
						<span class="font-semibold text-gray-700">{{ fleuristes|length }} fleuristes</span>
					</div>
				</div>

				{# Grille des fleuristes #}
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
					{% for user in fleuristes %}
						{% if user.fleuriste %}
							<div class="group bg-white/70 backdrop-blur-sm rounded-3xl border border-white/50 shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden">
								{# Header avec gradient #}
								<div class="relative h-24 bg-gradient-to-br from-green-400 via-emerald-400 to-teal-400 overflow-hidden">
									<div class="absolute inset-0 opacity-20">
										<div class="absolute top-2 right-4 text-white/30 text-4xl">ğŸŒ¿</div>
										<div class="absolute bottom-2 left-4 text-white/20 text-3xl">ğŸŒ¸</div>
									</div>
								</div>

								{# Avatar #}
								<div class="relative -mt-12 flex justify-center">
									<img src="{{ user.avatarName ? asset('uploads/avatars/' ~ user.avatarName) : asset('basic_avatar/1.png') }}" 
										alt="{{ user.fleuriste.nom }}" 
										class="w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg group-hover:scale-110 transition-transform">
								</div>

								{# Contenu #}
								<div class="p-6 text-center">
									<h3 class="text-xl font-bold text-gray-900 mb-2">{{ user.fleuriste.nom }}</h3>
									
									<div class="space-y-2 mb-6">
										<p class="flex items-center justify-center gap-2 text-gray-500 text-sm">
											<i class="fas fa-envelope text-green-500"></i>
											{{ user.email }}
										</p>
										{% if user.adresses is not empty %}
											{% set principale_adresse = null %}
											{% for adresse in user.adresses %}
												{% if adresse.principale %}
													{% set principale_adresse = adresse %}
												{% endif %}
											{% endfor %}
											{% if principale_adresse is null %}
												{% set principale_adresse = user.adresses|first %}
											{% endif %}
											<p class="flex items-center justify-center gap-2 text-gray-500 text-sm">
												<i class="fas fa-map-marker-alt text-green-500"></i>
												{{ principale_adresse.adresseComplete|length > 30 ? principale_adresse.adresseComplete[:30] ~ '...' : principale_adresse.adresseComplete }}
											</p>
										{% else %}
											<p class="flex items-center justify-center gap-2 text-amber-500 text-sm">
												<i class="fas fa-exclamation-circle"></i>
												Adresse non renseignÃ©e
											</p>
										{% endif %}
									</div>

									{# Boutons #}
									<div class="flex gap-3">
										<a href="{{ path('app_fleuriste_detail', {'id': user.id}) }}" 
											class="flex-1 inline-flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-xl font-semibold transition-all hover:shadow-lg hover:-translate-y-0.5">
											<i class="fas fa-eye"></i>
											Voir
										</a>
										<a href="{{ path('app_conversation_new', {'id': user.id}) }}" 
											class="flex-1 inline-flex items-center justify-center gap-2 bg-white border-2 border-green-500 text-green-600 hover:bg-green-500 hover:text-white py-3 px-4 rounded-xl font-semibold transition-all">
											<i class="fas fa-comment"></i>
											Message
										</a>
									</div>
								</div>
							</div>
						{% endif %}
					{% endfor %}
				</div>
			{% endif %}
		</div>
	</div>
{% endblock %}
