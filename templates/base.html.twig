<!DOCTYPE html>
<html class="scroll-smooth" lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" type="image/x-icon" href="{{ asset('img/favicon.ico') }}">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
		<title>{% block title %}FleurVerte{% endblock %}</title>
		{% block stylesheets %}
			{{ encore_entry_link_tags('app') }}
		{% endblock %}
		{% block javascripts %}
			{{ encore_entry_script_tags('app') }}
			<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
		{% endblock %}
		<style>
			body { font-family: 'Inter', sans-serif; }
			[x-cloak] { display: none !important; }
		</style>
	</head>
	<body class="bg-white min-h-screen flex flex-col">
		{# Navigation transparente #}
		<nav class="bg-white/80 backdrop-blur-lg border-b border-white/20 sticky top-0 z-50" x-data="{ mobileOpen: false }">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-16">
				<div class="flex justify-between items-center h-16">
					{# Logo #}
					<a href="{{ path('app_home') }}" class="flex items-center">
						<img src="{{ asset('img/logo/logo_last.png') }}" alt="FleurVerte" class="h-10 w-auto">
					</a>

					{# Navigation principale - Desktop #}
					<div class="hidden lg:flex items-center space-x-8">
						<a href="{{ path('app_home') }}" class="text-gray-700 hover:text-green-600 font-medium transition-colors">Accueil</a>
						<a href="{{ path('app_product') }}" class="text-gray-700 hover:text-green-600 font-medium transition-colors">Nos Fleurs</a>
						<a href="{{ path('app_fleuriste_index') }}" class="text-gray-700 hover:text-green-600 font-medium transition-colors">Fleuristes</a>
						<a href="{{ path('app_conseils_culture') }}" class="text-gray-700 hover:text-green-600 font-medium transition-colors">Conseils</a>
						{% if is_granted('ROLE_USER') %}
							<a href="{{ path('app_messages_index') }}" class="text-gray-700 hover:text-green-600 font-medium transition-colors relative">
								Messages
								{% if unread_messages_count is defined and unread_messages_count > 0 %}
									<span class="absolute -top-2 -right-4 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">{{ unread_messages_count }}</span>
								{% endif %}
							</a>
						{% endif %}
					</div>

					{# Actions droite #}
					<div class="flex items-center space-x-4">
						{# Panier #}
						{% if is_granted('ROLE_USER') %}
							<a href="{{ path('app_cart_index') }}" class="relative p-2 text-gray-700 hover:text-green-600 transition-colors">
								<i class="fas fa-shopping-bag text-xl"></i>
								{% if app.session.get('cart_count') is defined and app.session.get('cart_count') > 0 %}
									<span class="absolute -top-1 -right-1 bg-green-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold">{{ app.session.get('cart_count') }}</span>
								{% endif %}
							</a>
						{% endif %}

						{# Profil / Auth #}
						{% if app.user %}
							<div class="relative" x-data="{ open: false }" @click.outside="open = false">
								<button @click="open = !open" class="flex items-center space-x-2 focus:outline-none">
									<img src="{{ app.user.avatarName ? asset('uploads/avatars/' ~ app.user.avatarName) : asset('img/default-avatar.png') }}" alt="Avatar" class="h-8 w-8 rounded-full object-cover border-2 border-green-200">
									<span class="hidden md:block text-gray-700 font-medium text-sm">{{ app.user.username }}</span>
									<i class="fas fa-chevron-down text-gray-400 text-xs transition-transform" :class="{'rotate-180': open}"></i>
								</button>
								<div x-show="open" x-cloak x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95" class="absolute right-0 mt-2 w-56 bg-white/90 backdrop-blur-lg rounded-2xl shadow-xl border border-gray-100 py-2 z-50">
									<a href="{{ path('app_profil_index') }}" class="flex items-center px-4 py-3 text-gray-700 hover:bg-green-50 transition-colors">
										<i class="fas fa-user mr-3 text-green-600"></i>Mon Profil
									</a>
									{% if is_granted('ROLE_FLEURISTE') %}
										<a href="{{ path('app_fleuriste_dashboard') }}" class="flex items-center px-4 py-3 text-gray-700 hover:bg-green-50 transition-colors">
											<i class="fas fa-store mr-3 text-green-600"></i>Dashboard
										</a>
									{% endif %}
									<hr class="my-2 border-gray-100">
									<a href="{{ path('app_logout') }}" class="flex items-center px-4 py-3 text-red-600 hover:bg-red-50 transition-colors">
										<i class="fas fa-sign-out-alt mr-3"></i>Déconnexion
									</a>
								</div>
							</div>
						{% else %}
							<div class="hidden sm:flex items-center space-x-3">
								<a href="{{ path('app_login') }}" class="text-gray-700 hover:text-green-600 font-medium transition-colors">Connexion</a>
								<a href="{{ path('app_register') }}" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2.5 rounded-full font-semibold transition-all hover:shadow-lg">Inscription</a>
							</div>
						{% endif %}

						{# Menu mobile toggle #}
						<button @click="mobileOpen = !mobileOpen" class="lg:hidden p-2 text-gray-700">
							<i class="fas fa-bars text-xl" :class="{'fa-bars': !mobileOpen, 'fa-times': mobileOpen}"></i>
						</button>
					</div>
				</div>

				{# Menu mobile - Hidden by default #}
				<div x-show="mobileOpen" x-cloak x-transition class="lg:hidden pb-4">
					<div class="flex flex-col space-y-2">
						<a href="{{ path('app_home') }}" class="px-4 py-3 text-gray-700 hover:bg-green-50 rounded-xl font-medium">Accueil</a>
						<a href="{{ path('app_product') }}" class="px-4 py-3 text-gray-700 hover:bg-green-50 rounded-xl font-medium">Nos Fleurs</a>
						<a href="{{ path('app_fleuriste_index') }}" class="px-4 py-3 text-gray-700 hover:bg-green-50 rounded-xl font-medium">Fleuristes</a>
						<a href="{{ path('app_conseils_culture') }}" class="px-4 py-3 text-gray-700 hover:bg-green-50 rounded-xl font-medium">Conseils</a>
						{% if not app.user %}
							<hr class="border-gray-100">
							<a href="{{ path('app_login') }}" class="px-4 py-3 text-gray-700 hover:bg-green-50 rounded-xl font-medium">Connexion</a>
							<a href="{{ path('app_register') }}" class="mx-4 py-3 bg-green-600 text-white text-center rounded-full font-semibold">Inscription</a>
						{% endif %}
					</div>
				</div>
			</div>
		</nav>

		{# Flash messages #}
		{% for label, messages in app.flashes %}
			{% for message in messages %}
				<div class="max-w-7xl mx-auto px-4 mt-4">
					<div class="rounded-2xl p-4 {% if label == 'success' %}bg-green-50 text-green-800 border border-green-200{% elseif label == 'error' %}bg-red-50 text-red-800 border border-red-200{% else %}bg-blue-50 text-blue-800 border border-blue-200{% endif %}">
						<div class="flex items-center">
							<i class="fas {% if label == 'success' %}fa-check-circle{% elseif label == 'error' %}fa-exclamation-circle{% else %}fa-info-circle{% endif %} mr-3"></i>
							{{ message }}
						</div>
					</div>
				</div>
			{% endfor %}
		{% endfor %}

		<main class="flex-grow">
			{% block body %}{% endblock %}
		</main>

		{# Footer moderne #}
		<footer class="bg-gray-900 text-white mt-auto">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-16 py-16">
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12">
					{# À propos #}
					<div>
						<div class="flex items-center space-x-2 mb-6">
							<img src="{{ asset('img/logo/logo_last.png') }}" alt="FleurVerte" class="h-10 w-auto">
							<span class="text-xl font-bold text-green-400">FleurVerte</span>
						</div>
						<p class="text-gray-400 mb-6 leading-relaxed">Votre destination pour des fleurs d'exception. Nous connectons les meilleurs fleuristes avec les amoureux de la nature.</p>
						<div class="flex space-x-4">
							<a href="#" class="w-10 h-10 bg-gray-800 hover:bg-green-600 rounded-full flex items-center justify-center transition-colors">
								<i class="fab fa-facebook-f"></i>
							</a>
							<a href="#" class="w-10 h-10 bg-gray-800 hover:bg-green-600 rounded-full flex items-center justify-center transition-colors">
								<i class="fab fa-instagram"></i>
							</a>
							<a href="#" class="w-10 h-10 bg-gray-800 hover:bg-green-600 rounded-full flex items-center justify-center transition-colors">
								<i class="fab fa-twitter"></i>
							</a>
							<a href="#" class="w-10 h-10 bg-gray-800 hover:bg-green-600 rounded-full flex items-center justify-center transition-colors">
								<i class="fab fa-pinterest"></i>
							</a>
						</div>
					</div>

					{# Liens rapides #}
					<div>
						<h3 class="text-lg font-semibold mb-6">Navigation</h3>
						<ul class="space-y-3">
							<li><a href="{{ path('app_home') }}" class="text-gray-400 hover:text-green-400 transition-colors">Accueil</a></li>
							<li><a href="{{ path('app_product') }}" class="text-gray-400 hover:text-green-400 transition-colors">Nos Fleurs</a></li>
							<li><a href="{{ path('app_fleuriste_index') }}" class="text-gray-400 hover:text-green-400 transition-colors">Fleuristes</a></li>
							<li><a href="{{ path('app_conseils_culture') }}" class="text-gray-400 hover:text-green-400 transition-colors">Conseils</a></li>
							<li><a href="#" class="text-gray-400 hover:text-green-400 transition-colors">Blog</a></li>
						</ul>
					</div>

					{# Informations #}
					<div>
						<h3 class="text-lg font-semibold mb-6">Informations</h3>
						<ul class="space-y-3">
							<li><a href="#" class="text-gray-400 hover:text-green-400 transition-colors">Conditions générales</a></li>
							<li><a href="#" class="text-gray-400 hover:text-green-400 transition-colors">Politique de confidentialité</a></li>
							<li><a href="#" class="text-gray-400 hover:text-green-400 transition-colors">Livraison & Retours</a></li>
							<li><a href="#" class="text-gray-400 hover:text-green-400 transition-colors">FAQ</a></li>
						</ul>
					</div>

					{# Contact #}
					<div>
						<h3 class="text-lg font-semibold mb-6">Contact</h3>
						<ul class="space-y-4">
							<li class="flex items-start space-x-3">
								<i class="fas fa-map-marker-alt text-green-400 mt-1"></i>
								<span class="text-gray-400">123 Avenue des Fleurs<br>75000 Paris, France</span>
							</li>
							<li class="flex items-center space-x-3">
								<i class="fas fa-phone text-green-400"></i>
								<span class="text-gray-400">+33 1 23 45 67 89</span>
							</li>
							<li class="flex items-center space-x-3">
								<i class="fas fa-envelope text-green-400"></i>
								<span class="text-gray-400">contact@fleurverte.fr</span>
							</li>
						</ul>
					</div>
				</div>

				{# Bottom bar #}
				<div class="border-t border-gray-800 mt-12 pt-8">
					<div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
						<p class="text-gray-500 text-sm">&copy; {{ 'now'|date('Y') }} FleurVerte. Tous droits réservés.</p>
						<div class="flex items-center space-x-6">
							<span class="text-gray-500 text-sm">Paiement sécurisé</span>
							<div class="flex space-x-3">
								<i class="fab fa-cc-visa text-2xl text-gray-400"></i>
								<i class="fab fa-cc-mastercard text-2xl text-gray-400"></i>
								<i class="fab fa-cc-paypal text-2xl text-gray-400"></i>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</body>
</html>
